{% extends "base.html" %}

{% block content %}


{% for message in get_flashed_messages() %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
{{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}


<br/>
<div class="page-header">
    <h3>Create New User</h3>
    <br/>
</div>
<div class="container">

        <div class="col-md-4">
            <form method="POST" enctype="multipart/form-data">
            {{ form_user.hidden_tag() }}
            {{ form_user.email.label(class="form-label") }}
            {{ form_user.email(class="form-control") }}
            {{ form_user.username.label(class="form-label") }}
            {{ form_user.username(class="form-control") }}

            {{ form_user.password.label(class="form-label") }}
            {{ form_user.password(class="form-control") }}

            {{ form_user.password2.label(class="form-label") }}
            {{ form_user.password2(class="form-control") }}

            {{ form_user.role.label(class="form-label") }}
            {{ form_user.role(class="form-control") }}
            <br/>
            {{ form_user.submit(class="btn btn-secondary") }}
            </form>
        </div>
</div>
<br/><br/>
<div class="page-header" align="left">

    <h3>User list</h3>

</div>

<div class="container">
    <table  width="300px" class="table table-hover table-bordered table-striped">
        <tr>
            <th>ID</th>
            <th>Email</th>
            <th>Username</th>
            <th>Role</th>
            <th>Confirmed</th>
            <th>Last Seen</th>
            <th>Member Since</th>
            <th>Action</th>
        </tr>
        {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.role.name }}</td>
            <td>{{ user.confirmed }}</td>
            <td>{{ user.last_seen.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ user.member_since.strftime('%Y-%m-%d %H:%M') }}</td>
            <td><a href="{{ url_for('auth.delete_user', id=user.id) }}">delete</a></td>
        </tr>
        {% endfor %}
</div>

{% endblock %}